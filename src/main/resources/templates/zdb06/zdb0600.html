<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorator="layout/content_layout">
<th:block layout:fragment="page_head">
	<title>환경설정</title>
</th:block>
<th:block layout:fragment="page_css">
</th:block>
<th:block layout:fragment="page_js">
	<script type="text/javascript" src="/script/app/common/cloudzdb-validator.js"></script>
</th:block>
<th:block layout:fragment="content">
	<!-- Location -->
	<div class="locations-area">
		<div class="prj-list">
			<strong>Namespace : </strong>
			<button id="namespaces" class="Dropdownbutton namespace"></button>
			<ul class="dropmenu-list hide">
			</ul>
		</div>
	</div>
	<!-- Contents -->
	<div class="contents-box">
		<!-- Top Area -->
		<div class="top-area">
			<h2 class="title">기본값 설정</h2>
			<div class="tag-wrap">
				<span class="tag">DB Instance 생성 시 적용할 기본값을 설정합니다.</span>
			</div>
		</div>
		<!-- Detail Area -->
		<form name="configForm" method="post">
			<div class="ctn-info__wrap">
				<div>
					<span class="config-title">활성화 </span>
					<div class="onoff-wrap">
						<button class="Button btn-off">OFF</button>
					</div>
					<div class="hide">
						<select name="useYn">
							<option value="Y">Y</option>
							<option value="N">N</option>
						</select>
					</div>
				</div>
			</div>
			<div>
				<ul>
					<li>
						<div class="accor-contents__wrap">
							<table class="Table Form-type" style="border-top-width: 0px; border-bottom-width: 0px;">
								<colgroup>
									<col style="width: 200px;">
									<col>
								</colgroup>
								<tbody>
									<tr>
										<th><b>공통</b></th>
									</tr>
									<tr>
										<th>Resource 가용량 체크</th>
										<td>
											<div class="onoff-wrap" id="exposeOnOff">
												<button class="Button btn-on">ON</button>
											</div>
											<div class="hide">
												<input type="radio" name="exposeType" value="true"
													checked="checked">Y <input type="radio"
													name="exposeType" value="false" />N
											</div>
										</td>
									</tr>
									<tr>
										<th>Public Network 사용</th>
										<td>
											<div class="onoff-wrap" id="exposeOnOff">
												<button class="Button btn-on">ON</button>
											</div>
											<div class="hide">
												<input type="radio" name="exposeType" value="true"
													checked="checked">Y <input type="radio"
													name="exposeType" value="false" />N
											</div>
										</td>
									</tr>
								</tbody>
							</table>
							<table class="Table Form-type" style="border-top-width: 0px;">
								<colgroup>
									<col style="width: 200px;">
									<col>
								</colgroup>
								<tbody>
									<tr>
										<th><b>MariaDB</b></th>
									</tr>
									<tr>
										<th>Backup 보관 기간</th>
										<td>
											<div class="info-list" style="margin-right: 0px;">
												<div class="Spinner" data-min="0" data-max="60"
													data-step="1" id="storePeriodSpinner">
													<input id="storePeriod" name="storePeriod" value="1"
														style="width: 80px;"> <a class="Up"></a> <a
														class="Down"></a>
												</div>
											</div> <span class="info-list">일</span>
										</td>
									</tr>
									<tr>
										<th>Backup 시간</th>
										<td>
											<div class="info-list">
												<div class="Spinner Time" data-locale="en" id="startTime"
													data-hours="24H" data-bind="time:date">
													<input data-hour> <span data-seperator>:</span> <input
														data-minute> <input data-ampm> <a
														class="Up"></a> <a class="Down"></a>
												</div>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</li>
				</ul>
			</div>
		</form>
		<!-- button wrap-->
		<div class="btn-wrap">
			<div class="btn-right">
				<button class="Button btn lg bg-red" id="btnNext">저장</button>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		var gNamespaces = null; // 네임스페이스 콤보
		$a.page(function() {
			this.init = function() {
				gNamespaces = gCommon.getNamespaceCombo($('#namespaces'))
						.addHandler(function(e) {
							gCommon.setSelectedNamespace(e.currentTarget.id);
							fn_getZDBConfig();
						}).select({
							id : gSelectedNamespace
						});
				$('.Accordion').expandAll();
				
				//on off button
				backupForm.find('.onoff-wrap > button').click(function(e){
					e.preventDefault();
					if($(this).hasClass('btn-on')) {
						setBackupUseYnEvt('N');
					} else {
						setBackupUseYnEvt('Y');
					}
				});
				function setBackupUseYnEvt(val){
					var msg = val == 'Y'? '환경설정을 활성화 하시겠습니까?': '환경설정을 비활성화 하시겠습니까?';
					gCommon.confirm(msg,function(yn){
						if(yn == 'Y'){
							setBackupUseYn(val);
							/* fn_saveSchedule();	 */			
						};
					});
				}

				function fn_getZDBConfig() {
					var param = $('form[name=eventForm]').serializeObject();
					$a.ajax({
						url : '/zdbapi/getZDBConfig',
						data : {
							namespace : gSelectedNamespace
						},
						success : function(res) {
							//TODO
						}
					});
				}
			}
		});
	</script>
</th:block>
</html>